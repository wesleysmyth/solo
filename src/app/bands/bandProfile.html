<div class="container" ng-controller="SearchController">
  <div ng-include="'components/navbar/navbar.html'"></div>
  <div ui-view></div>
  <button ng-click="sendUsAMessage()">Send us a message</button>
  <div ng-init="toggleDays()" class="cal"></div>

</div>

<script>
  $(document).ready(function() {
    // page is now ready, initialize the calendar...
    $('.cal').fullCalendar({
      // put your options and callbacks here
      dayClick: function(date, jsEvent, view) {
        // alert('Clicked on: ' + date.format());
        // alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
        // alert('Current view: ' + view.name);
        // change the day's background color just for fun
        // $(this).css('background-color', 'red');
        this.count = this.count ? this.count : 0;
        function badPractice() {
          var $body = angular.element(document.body);   // 1
          var $rootScope = $body.scope().$root;         // 2
          $rootScope.$apply(function () {               // 3
              console.log($rootScope);
          });
        }
        badPractice();
        if (this.count % 2 === 0) {
          $(this).css('background-color', '#75E69E');
          $(this).css('text-align', 'center');
          var text = 'Available';
          $(this)[0].childNodes[0].childNodes[1].childNodes[0].innerText = text;
        } 
        // else if (this.count % 2 === 0) {
        //   $(this).css('background-color', 'indianred');
        //   $(this).css('text-align', 'center');
        //   var text = 'Not Available';
        //   $(this)[0].childNodes[0].childNodes[1].childNodes[0].innerText = text;
        // } 
        else {
          $(this).css('background-color', '#fafafa');
          $(this).css('text-align', 'center');
          var text = '';
          $(this)[0].childNodes[0].childNodes[1].childNodes[0].innerText = text;
        }
        $(this.count++);
      },
      dayRender: function(date, cell) {
        var today = new Date();
        console.log(date);
        if (date.getDate() % Math.floor(Math.random()*20) === 0) {
          cell.css('background-color', '#75E69E');
          cell.css('text-align', 'center');
          var text = 'Available';
          cell[0].childNodes[0].childNodes[1].childNodes[0].innerText = text;
        }
      }
    });
  });
</script>
